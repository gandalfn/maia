/* -*- Mode: Vala; indent-tabs-mode: nil; c-basic-offset: 4; tab-width: 4 -*- */
/*
 * test-glx.vala
 * Copyright (C) Nicolas Bruguier 2010-2013 <gandalfn@club-internet.fr>
 *
 * maia is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * maia is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 * See the GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

const string manifest = "Window.test {" +
                        "    background_pattern: #CECECE;" +
                        "    border: 5;" +
                        "    size: 1000,800;" +
                        "    RendererView.renderer {" +
                        "       looper: timeline (25, 360);" +
                        "       background_pattern: #CECECE;" +
                        "       DrawingArea.clinical_draw {" +
                        "           selected-border-color: #FFFFFF;" +
                        "           selected-border-line-width: 4;" +
                        "           Entry.label_draw {" +
                        "               position: 300, 50;" +
                        "               stroke-pattern: #FFFFFF;" +
                        "               font-description: 'Liberation Sans Bold 24';" +
                        "               text: 'Maia opengl renderer';" +
                        "           }" +
                        "           ScaleBar.scale_bar {" +
                        "               position: 900, 10;" +
                        "               size: 48, 600;" +
                        "               placement: right;" +
                        "               line-width: 2.0;" +
                        "               step-line-width: 1.0;" +
                        "               label_border: 5.0;" +
                        "               stroke-pattern: #FFFFFF;" +
                        "               font-description: 'Liberation Sans 8';" +
                        "               fill-pattern: rgba (1, 1, 1, 0.9);" +
                        "           }" +
                        "           Image.maya {" +
                        "               position: 350, 250;" +
                        "               size: 300, 300;" +
                        "               [" +
                        """                <svg height="300pt" width="300pt" viewBox="0 0 300.000000 300.000000">""" +
                        """                 <g>""" +
                        """                     <g transform="translate(0 300) scale(0.1 -0.1)">""" +
                        """                         <path d="m1596 2684c-20-19-20-35-2-59 11-15 21-17 59-12 41 6 50 3 88-26 109-83 205-305 214-495l4-73-68 7c-87 8-146-15-175-67-16-31-26-36-72-45l-53-10-6 34c-13 70-45 158-65 180-29 30-68 28-123-9-50-33-118-125-137-186-17-54-25-58-45-26-30 45-107 124-147 149-51 32-117 48-159 37-85-22-126-220-80-388 29-106 97-233 175-330 35-44 61-83 58-86-4-4-24-12-45-19-61-19-139-99-176-180-40-86-48-160-28-255 11-54 12-72 2-81-9-10-14 1-23 48-14 74-33 98-80 98-23 0-44 8-58 21-51 48-107-13-121-134-4-38-16-66-44-105-21-30-45-76-55-104-12-38-34-67-91-123-62-62-74-78-71-102 5-49 76-43 158 13 29 20 75 43 103 51 29 8 74 26 100 40 43 21 66 25 185 29 130 5 139 6 185 35l49 29 62-19c104-32 208-44 274-31 50 10 197 51 236 66 9 3 16-5 20-23 18-71 62-94 92-48 13 19 20 23 30 14 25-21 58-6 70 31 8 23 19 36 33 38 27 4 27 33 0 89l-21 44 40 43c22 23 63 75 91 114 59 81 41 75 278 93l152 11 47-31c74-48 111-38 98 27-5 25 0 29 68 62 54 27 74 42 76 58 3 19-1 22-27 22-16 0-32 4-36 9-3 5-19 12-35 16-25 6-28 9-20 25 6 10 10 22 10 26 0 7-75-1-102-11-13-5-13 2 4 52 15 44 19 75 16 130-4 64-3 73 14 79 75 24 63 180-22 278-18 20-27 36-21 36 21 0 33 40 21 71-14 34-75 91-122 115-18 9-34 18-36 19-1 1 31 35 71 76 106 107 200 252 252 391 9 26 28 54 41 63 28 18 31 47 8 69-19 20-68 21-84 2-17-22-8-60 18-71 12-5 22-14 22-20 0-20-99-215-139-274-46-67-149-182-190-210-39-27-87-12-86 26 0 23-5 29-28 31-15 2-50-3-78-12l-51-14-35 34c-19 19-47 37-62 40-25 5-28 11-40 81-15 90-51 204-89 281-29 61-114 159-156 182-15 7-25 19-22 26 2 6-2 21-10 33-18 25-65 28-88 5zm-69-599c12-22 30-73 39-114 16-71 16-74-2-84-43-24-104-92-120-133-17-44-16-46 4-73 20-28 20-29 2-46-10-9-25-30-33-47l-15-30-76 148c-73 142-76 149-65 183 33 100 95 188 158 221 53 29 81 22 108-25zm-489-36c47-20 123-93 169-162 28-43 29-49 22-104-16-109 15-301 71-442 11-29 20-53 20-54s-53-2-118-1l-117 1-60 70c-72 85-137 196-173 295-22 62-26 91-26 188-1 110 0 118 29 170 41 75 81 83 183 39zm1011-20c17-17 31-34 31-39 0-4 28 0 63 11 92 28 101 26 94-16-5-33-4-35 22-35 40 0 45-11 14-32-19-12-23-18-12-18 9 0 22 7 29 15 19 23 48 18 102-16 92-59 128-131 73-145l-25-6 36-40c96-107 113-268 28-268-24 0-24-2-17-37 22-104-4-211-63-263-82-72-153-4-114 110 15 45 16 56 4 79-18 35-18 133 1 178 8 20 14 37 13 38-2 1-22 7-45 14-23 8-59 31-82 55-37 38-91 130-91 155 0 19-15 12-25-11-12-28-47-35-65-13-11 13-11 25-3 56 10 39 10 40-11 24-84-60-184-104-241-105-25 0-33-6-47-40-11-28-27-44-55-57-37-18-38-20-45-82-8-75-48-162-82-181-59-31-117 25-124 121-4 49 0 65 22 103 15 26 44 56 69 70l42 26-36-2c-46-1-59 7-59 38 0 81 140 194 241 194 11 0 25 15 35 35 25 53 62 68 156 63 43-3 81-8 85-12 4-3 10-25 14-49l6-42 2 43c1 40 3 43 24 37 20-5 19-4-5 15-33 25-38 60-9 60 11 0 33-14 50-31zm-719-354c44-87 60-131 60-160 0-63 20-117 54-150 50-47 52-63 8-71-20-4-55-8-77-8l-40-1-33 90c-48 126-62 203-62 335 0 139 2 138 90-35zm682 58c13-16 60-17 76-1 6 6 13 10 14 7 2-2 14-26 27-52 32-64 94-124 143-139 30-9 37-15 32-27-4-9-12-40-17-69-9-43-7-63 6-106 16-48 16-57 2-89-18-43-19-81-4-108 14-27-5-48-79-86-86-45-140-56-245-51-160 9-299 87-374 209-47 78-52 118-19 154 27 29 50 95 61 175 6 40 12 48 43 65 22 12 44 35 55 56 16 33 22 37 68 42 31 4 79 22 122 45l72 39 3-26c2-14 8-32 14-38zm-366-600c29-28 82-65 116-82 75-37 196-64 255-58l42 4-51-74c-29-41-58-78-66-81-27-10-137 17-200 50-119 60-211 181-256 336l-15 52 32 13 32 14 29-61c17-35 52-83 82-113zm-476 144c0-2-13-30-29-63-90-181-108-372-56-575 9-35 21-72 26-81 13-24 0-23-62 3-41 18-54 30-75 70-91 180-64 448 59 602 21 26 34 31 130 46 4 0 7-1 7-2zm183-99c3-51 14-120 24-153 19-58 19-62 2-110-24-66-25-200-3-255 22-54 58-72 164-79l85-6-60-22c-84-31-143-45-163-38-21 6-81 84-111 142-64 127-68 355-10 576 8 32 14 37 38 37h28l6-92zm1215-28c-10-16-24-20-68-21-71-1-56-6 45-15 55-4 74-9 60-15-14-5-4-8 33-8 28-1 52-5 52-10 0-12-54-44-111-66l-46-17 5-44c6-55-7-57-74-11l-49 33-178-14c-99-7-181-11-184-9-14 14 27 46 76 60 31 9 84 34 118 56 53 34 66 39 102 34 29-4 48-1 68 13 27 17 125 52 151 53 10 1 10-3 0-19zm-1058-190c16-17 38-59 50-94 20-60 24-65 68-84 26-11 71-27 100-37 63-20 119-66 138-112 21-48 18-58-11-39l-25 16v-40c0-22-4-40-10-40-5 0-10 11-10 24 0 14-4 27-9 30s-6-15-3-39c5-51-8-59-34-20l-17 26-18-41c-10-22-22-40-27-40-16 0-33 27-47 72l-12 43-99 7c-145 11-172 39-173 184-1 89 21 166 56 193 35 28 50 26 83-9zm-867-58c9-10 32-53 52-97s42-83 48-87c17-11 65-10 87 2 15 8 22 4 39-23 11-18 29-42 41-52 28-25 26-36-21-89-49-56-85-76-135-76-30 0-45 8-81 45l-45 45-93-98c-95-100-159-143-218-146-53-2-39 38 41 114 54 51 73 78 90 125 13 33 38 80 57 104 20 25 35 55 35 70 0 39 24 126 44 155 19 30 37 33 59 8z"/>""" +
                        """                         <path d="m1792 1579c-44-40-56-113-24-142 27-24 47-21 75 13 33 39 42 82 25 117s-47 40-76 12z"/>""" +
                        """                         <path d="m2124 1520c-52-20-81-100-54-151 20-36 79-19 105 31 35 68 5 140-51 120z"/>""" +
                        """                         <path d="m1746 1377c-15-16-25-31-22-34 3-4 12 2 20 13 13 17 15 14 20-31 10-85 35-175 57-206 16-22 28-29 55-29 48 0 81 19 138 80 27 29 61 57 77 64 19 8 25 16 20 25-7 11-13 9-30-8-26-26-114-29-183-6-59 21-116 79-120 125l-3 35-29-28zm131-141c17-8 56-19 87-22 31-4 56-10 56-13 0-14-69-72-101-85-34-14-34-14-45 17-8 23-18 33-36 35-29 4-36 16-47 84l-8 47 31-24c17-12 45-30 63-39z"/>""" +
                        """                     </g>""" +
                        """                     <g stroke="#000" stroke-dasharray="0.75350877, 0.75350877000000005" stroke-width=".75351" fill="#ffd19f">""" +
                        """                         <path d="m241.81 247.97c-20.378-2.4307-37.581-14.268-45.433-31.262-2.7068-5.8586-2.5989-9.24 0.42385-13.282 3.709-4.9595 5.6678-10.23 7.4467-20.035 0.58745-3.2381 1.2967-6.3147 1.5762-6.8369 0.27946-0.52216 1.8265-1.808 3.4378-2.8573 3.6463-2.3746 6.1506-4.9632 7.9779-8.2465 1.6637-2.9892 2.7699-3.6598 7.0352-4.2648 5.5414-0.78592 11.926-3.3233 21.324-8.4744l3.5831-1.9639 0.30673 2.2602c0.44162 3.2541 1.4513 5.4945 2.7788 6.1658 2.8136 1.4228 6.513 1.1642 8.9323-0.62449 0.70379-0.52034 1.3398-0.87935 1.4135-0.7978 0.0736 0.0816 0.97108 1.8259 1.9944 3.8763 2.8282 5.667 5.5002 9.5486 8.9387 12.985 3.6296 3.6278 6.848 5.7938 10.677 7.1857 3.7111 1.349 3.897 1.6381 3.037 4.7229-2.5447 9.128-2.7236 14.004-0.75237 20.501 0.73198 2.4123 1.3331 5.0842 1.3359 5.9376 0.003 0.85341-0.58819 3.2525-1.3132 5.3314-1.8494 5.3029-2.0799 8.2132-0.92133 11.634 1.1096 3.2761 1.1451 4.2025 0.21556 5.6211-2.0277 3.0946-14.926 9.6999-22.757 11.653-4.1997 1.0478-15.502 1.4576-21.259 0.77099zm0.0846-10.811c2.2615-1.1138 4.4648-2.911 9.6783-7.8947 4.2165-4.0306 7.8467-7.0917 9.6712-8.1552 3.0398-1.7719 3.7144-3.014 2.2822-4.2026-0.70081-0.58163-0.91436-0.48932-3.603 1.5575-2.4207 1.8428-5.5575 2.5674-10.89 2.5156-7.9752-0.0775-13.949-2.0251-19.32-6.2989-2.8572-2.2736-5.9307-6.3345-6.7078-8.8628-0.24126-0.78503-0.56711-2.5622-0.72409-3.9492-0.15698-1.3871-0.43855-2.5219-0.6257-2.5219-0.57961 0-5.1355 4.9918-5.8933 6.4571-1.0408 2.0127-0.17251 2.171 1.8561 0.33826 0.95442-0.86225 1.8292-1.4117 1.944-1.221 0.11481 0.19069 0.44639 2.2217 0.73685 4.5134 1.4702 11.599 4.6241 22.489 7.6704 26.483 1.7853 2.3406 3.4021 2.9474 7.4769 2.8061 2.9448-0.1021 3.9971-0.35736 6.4472-1.5641zm24.683-31.613c2.1877-0.99637 4.8224-3.8742 6.0088-6.5634 1.3696-3.1044 1.5734-8.1583 0.43285-10.737-1.0314-2.3318-3.0646-3.8073-5.2496-3.8098-6.4518-0.007-12.159 9.838-10.002 17.256 1.2636 4.3468 4.5614 5.7895 8.8104 3.8543zm-38.161-9.4569c2.0202-1.5409 4.9185-6.035 5.761-8.9331 2.0988-7.2197-2.7986-14.052-8.1054-11.308-1.8819 0.97318-4.8514 4.4552-6.1348 7.1937-0.95814 2.0445-1.1666 3.1158-1.1668 5.9979-0.00041 4.1503 0.78871 5.8397 3.5084 7.5111 2.1225 1.3044 4.008 1.1626 6.1375-0.46167z" transform="scale(.8)"/>""" +
                        """                         <path d="m313.81 260.29c-0.99489-0.44543-4.0637-2.3179-6.8197-4.1611l-5.0108-3.3512-14.411 1.1126c-7.9258 0.61194-16.779 1.2241-19.674 1.3604-2.8947 0.13631-6.5954 0.35378-8.2237 0.48327-2.9214 0.23233-2.9605 0.22108-2.9605-0.85076 0-1.9334 3.4731-4.1906 9.9846-6.4888 4.2713-1.5075 11.338-4.9418 15.015-7.2968 1.3268-0.84973 3.5965-2.1118 5.0439-2.8047 2.5362-1.2141 2.7933-1.2493 7.0935-0.9711l4.4619 0.28862 4.6095-2.2568c4.9942-2.4452 15.55-6.1769 17.497-6.1861 1.4549-0.007 1.5044 0.37403 0.2553 1.962-1.3687 1.74-3.3731 2.4148-7.2588 2.4436-3.9333 0.0291-7.1484 0.51258-6.426 0.96625 0.2728 0.17131 4.3917 0.71196 9.1531 1.2014 4.7614 0.4895 8.8406 1.0034 9.0648 1.1419 0.23997 0.14831 0.20257 0.49907-0.0909 0.85272-0.63594 0.76627 0.18215 0.94728 5.596 1.2382 5.5267 0.29694 5.9548 0.59819 3.6518 2.5695-2.1177 1.8127-9.2829 5.4278-14.176 7.1527-1.876 0.66124-3.4848 1.3228-3.5749 1.4701-0.0901 0.14732 0.0389 2.0792 0.28671 4.293 0.69589 6.2161 0.13565 7.2741-3.0878 5.8309z" transform="scale(.8)"/>""" +
                        """                         <path d="m210.87 314.87c-1.4812-1.5982-2.8377-4.5564-4.2025-9.1648l-1.1691-3.9474-7.1806-0.529c-20.813-1.5333-24.659-3.705-26.243-14.822-1.0459-7.3372-0.23642-18.886 1.7191-24.526 1.752-5.0535 4.8435-8.8178 8.1336-9.9037 4.0516-1.3371 8.7644 4.1756 12.94 15.136 1.145 3.0058 2.4011 5.9524 2.7913 6.5479 1.0688 1.6312 3.9245 3.1139 11.102 5.7644 10.607 3.9168 11.191 4.1656 14.405 6.1323 5.68 3.4758 10.248 9.3216 11.375 14.556 0.40303 1.8728-0.21707 1.8568-3.292-0.0851l-2.392-1.5105-0.24284 4.2517c-0.36501 6.3908-1.5129 7.5978-2.2262 2.3411-0.3424-2.5232-0.86582-3.428-1.6889-2.9193-0.35838 0.22149-0.41864 1.4333-0.20628 4.1479 0.3204 4.0958 0.0644 5.7259-0.89914 5.7259-0.59907 0-2.8457-2.582-4.3725-5.0251l-0.81056-1.2971-2.0941 4.3672c-3.0679 6.398-3.543 6.8134-5.4459 4.7601z" transform="scale(.8)"/>""" +
                        """                         <path d="m36.864 333.52c-1.1583-0.67465-0.93142-2.6049 0.58776-5.0004 0.74542-1.1754 4.1718-5.0134 7.6142-8.5288 6.9858-7.1341 8.5134-9.2635 11.195-15.605 2.2246-5.2608 3.6928-7.9245 7.2608-13.173 3.1359-4.6132 3.8802-6.5102 4.5536-11.605 1.2847-9.7208 5.6861-19.298 8.8687-19.298 0.44923 0 1.6054 0.71244 2.5692 1.5832 1.343 1.2133 2.6863 3.4932 5.7498 9.7588 5.1125 10.456 6.8587 13.465 8.1592 14.057 1.5685 0.71464 7.1785 0.57727 9.7014-0.23755 1.2185-0.39353 2.4865-0.61151 2.8178-0.48439 0.33126 0.12712 1.5681 1.6576 2.7485 3.4011s3.2903 4.4325 4.6887 5.9756 2.5425 3.1626 2.5425 3.5988c0 1.42-2.7276 5.02-7.2201 9.5298-5.379 5.3995-7.9548 6.8074-13.007 7.1096-4.9938 0.29861-5.8886-0.15061-11.871-5.9598l-5.2177-5.0667-10.838 10.966c-10.811 10.939-13.318 13.152-18.294 16.146-4.5152 2.7174-10.499 4.0617-12.61 2.8326z" transform="scale(.8)"/>""" +
                        """                     </g>""" +
                        """                     <g stroke="#000" stroke-width=".75351" fill="#fef200">""" +
                        """                         <path d="m293.2 235.73c-5.2313-1.1757-6.8551-8.152-4.0804-17.531 1.5883-5.3689 1.6524-6.5673 0.48837-9.1323-1.3666-3.0114-1.8947-7.1885-1.6436-13.002 0.19779-4.5799 0.43881-5.8996 1.7851-9.7742 0.85603-2.4637 1.4216-4.5575 1.2568-4.6528-0.16477-0.0953-1.4838-0.51124-2.9312-0.92426-4.4835-1.2794-8.4924-3.677-12.116-7.2465-4.8715-4.7984-10.525-13.888-11.809-18.987-0.2893-1.149-0.77696-2.0703-1.0958-2.0703-0.74093 0-1.8048 1.0729-2.6123 2.6344-2.0698 4.0026-7.0776 4.0922-8.5752 0.15338-0.28886-0.75975-0.14267-2.3039 0.49812-5.2615 0.49883-2.3024 0.80052-4.2926 0.67042-4.4227-0.13009-0.13009-2.4639 1.2176-5.1862 2.9949-9.6726 6.3149-19.794 10.622-26.275 11.182-1.7801 0.15366-3.6911 0.5636-4.2468 0.91099-0.55566 0.34739-1.7057 2.0764-2.5557 3.8423-1.8453 3.8336-3.494 5.5282-7.4745 7.6827-1.7848 0.96601-3.2761 2.128-3.7213 2.8996-0.40862 0.70817-1.0539 3.5586-1.434 6.3343-1.15 8.3982-3.6429 15.498-7.083 20.171-2.7535 3.7404-5.6015 4.9506-9.2476 3.9298-5.3862-1.5081-9.0023-8.7471-9.0964-18.21-0.0434-4.3617-0.0212-4.4601 1.8593-8.2599 2.3562-4.761 5.8452-8.429 10.914-11.474 1.9839-1.1919 3.6122-2.3089 3.6184-2.4823 0.006-0.17337-1.5182-0.19947-3.3878-0.058-4.0635 0.3075-6.8836-0.32952-7.6369-1.725-0.91074-1.6872-0.5738-4.8756 0.83052-7.8592 4.1862-8.8938 16.309-17.446 26.587-18.755 3.5501-0.45234 4.4795-1.1652 6.7075-5.1447 2.6394-4.7143 5.2441-6.3924 11.047-7.1168 3.3132-0.41362 13.352 0.0476 16.742 0.76928 1.9784 0.42111 2.5773 1.6617 3.4735 7.1956 0.38125 2.3542 0.84121 4.2805 1.0221 4.2808 0.18092 0.00026 0.33164-1.7265 0.33494-3.8372 0.004-2.1108 0.13128-4.3058 0.28441-4.8779 0.25932-0.96887 0.43191-1.0225 2.5159-0.78221l2.2375 0.25801-2.5308-2.3683c-3.7598-3.5184-4.6606-6.4773-2.1629-7.1042 1.6978-0.42612 4.5106 1.2933 7.7726 4.7511 1.5632 1.657 2.8421 3.2336 2.8421 3.5036 0 0.74089 3.8715 0.15404 9.2105-1.3962 6.557-1.9038 8.6648-2.2694 9.7464-1.6906 0.82769 0.44297 0.87794 0.74952 0.62105 3.7886-0.33593 3.974-0.0328 4.4768 2.7345 4.5364 2.4988 0.0538 4.1039 0.47731 4.3252 1.1411 0.0922 0.27651-0.92938 1.331-2.2701 2.3432-1.3407 1.0123-2.4377 2.0141-2.4377 2.2264 0 0.9908 2.6604 0.29252 4.3895-1.1521 1.0125-0.84592 2.3399-1.6633 2.9499-1.8164 2.878-0.72234 10.814 3.6062 16.405 8.948 3.5467 3.3885 5.6415 6.7252 5.6415 8.9861 0 1.7101-1.7192 3.3166-3.9272 3.6697-0.9867 0.15778-1.9038 0.46454-2.038 0.68169-0.13422 0.21716 0.89307 1.6222 2.2828 3.1222 3.9331 4.2452 6.2616 7.615 8.5522 12.377 3.2151 6.6833 4.3504 13.317 3.0811 18.003-0.8129 3.0012-3.7086 5.023-7.1943 5.023-0.69258 0-1.3344 0.29075-1.4801 0.67053-0.14152 0.36879 0.0874 2.7718 0.50861 5.3401 0.98859 6.0271 0.71474 13.791-0.65407 18.544-2.9767 10.335-10.662 17.654-17.033 16.223z" transform="scale(.8)" stroke-dasharray="0.75350877, 0.75350877000000005"/>""" +
                        """                         <g stroke-dasharray="0.75350877, 0.75350877">""" +
                        """                             <path d="m236.32 269.31c-20.871-3.8597-35.721-15.235-45.198-34.623-2.4197-4.9499-6.2415-15.796-6.4444-18.29-0.1079-1.3256 0.0117-1.4281 3.3296-2.8553 1.8928-0.81417 3.52-1.4803 3.616-1.4803s1.3249 2.3278 2.7309 5.173c5.5759 11.283 12.261 18.63 22.471 24.695 9.3521 5.556 24.973 9.5675 35.182 9.0348 3.5645-0.18598 4.649-0.11936 4.4235 0.27175-0.96361 1.6717-7.1458 10.395-9.8073 13.839-4.0015 5.1776-4.3735 5.3304-10.303 4.2338z" transform="scale(.8)"/>""" +
                        """                             <path d="m174.04 309.54c-4.0286-2.9391-11.89-14.568-14.273-21.112-3.443-9.4565-4.5916-18.428-4.2417-33.132 0.25114-10.553 1.0249-17.222 3.1871-27.473 2.2327-10.584 2.7035-11.38 6.7334-11.38h2.5904l0.24326 2.0833c0.13379 1.1458 0.36279 4.2544 0.50889 6.9079 0.40432 7.3435 1.8965 16.92 3.5474 22.767 0.81647 2.8915 1.4845 5.7094 1.4845 6.2619 0 0.55253-0.57907 2.8326-1.2868 5.0669-1.8097 5.713-2.2468 8.4234-2.529 15.685-0.51974 13.372 1.6868 20.657 7.2657 23.987 3.0595 1.8261 6.8403 2.6535 14.83 3.2456 10.629 0.78771 10.548 0.6944 2.9498 3.3846-7.8086 2.7647-13.412 4.3385-16.781 4.7128-2.2627 0.25144-2.6261 0.16512-4.2298-1.0049z" transform="scale(.8)"/>""" +
                        """                             <path d="m133.46 305.55c-7.3966-2.9459-9.154-4.5648-12.334-11.362-6.7054-14.334-7.7065-34.534-2.5687-51.829 3.2948-11.091 9.6902-21.956 14.212-24.145 2.2478-1.0882 12.668-3.1689 12.9-2.576 0.0814 0.20789-1.1408 3.1051-2.7161 6.4382-7.3173 15.483-10.23 26.419-11.056 41.517-0.6163 11.263 1.866 28.044 5.7508 38.877 1.7325 4.8311 1.7213 4.7644 0.79697 4.751-0.45029-0.007-2.6937-0.75861-4.9854-1.6713z" transform="scale(.8)"/>""" +
                        """                         </g>""" +
                        """                     </g>""" +
                        """                     <path d="m235.48 235.61c-0.33114-0.52724-0.87012-1.7255-1.1977-2.6628-0.80983-2.317-2.0875-3.4338-4.8463-4.236-1.9624-0.57063-2.4797-0.95082-3.2913-2.4191-0.79312-1.4348-2.7651-10.216-2.7651-12.312 0-0.30914 1.483 0.50193 3.2955 1.8024 6.8792 4.9356 10.24 6.2979 19.021 7.7098 2.9867 0.48025 5.7312 1.0416 6.0989 1.2473 1.3485 0.75465-6.296 7.6134-11.297 10.136-3.353 1.6914-4.3268 1.8339-5.0173 0.73445z" transform="scale(.8)" stroke="#000" stroke-dasharray="0.75350877, 0.75350877" stroke-width=".75351" fill="#fff"/>""" +
                        """                 </g>""" +
                        """                </svg>""" +
                        "               ]" +
                        "           }" +
                        "       }" +
                        "   }" +
                        "}";

static void on_initialize (Maia.Core.Notification inNotification)
{
    Maia.Graphic.Size size = ((Maia.Graphic.Renderer.InitializeNotification)inNotification).size;
    double w = size.width / size.height;

    GL.glViewport(0, 0, (int)size.width, (int)size.height);
    GL.glMatrixMode(GL.GL_PROJECTION);
    GL.glLoadIdentity();
    GL.glFrustum(-w, w, -1.0, 1.0, 1.5, 10);
    GL.glMatrixMode(GL.GL_MODELVIEW);
    GL.glLoadIdentity();
    GL.glTranslatef(0, 0, -2.5f);
}

static void on_new_frame (Maia.Core.Notification inNotification)
{
    float angle = ((Maia.Graphic.Renderer.NewFrameNotification)inNotification).num_frame;

    GL.glClear( GL.GL_COLOR_BUFFER_BIT | GL.GL_DEPTH_BUFFER_BIT );
    GL.glPushMatrix();
        GL.glRotatef(angle, 0, 0, 1);
        GL.glRotatef(angle, 1, 0, 0);
        GL.glScalef(0.7f, 0.7f, 0.7f);

        GL.glPushMatrix();
        GL.glScalef(0.75f, 0.75f, 0.75f);

        GL.glColor3f(1, 0, 0);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(1, -1, -1);
        GL.glVertex3f(1,  1, -1);
        GL.glVertex3f(1,  1,  1);
        GL.glVertex3f(1, -1,  1);
        GL.glEnd();

        GL.glColor3f(0, 1, 1);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(-1, -1, -1);
        GL.glVertex3f(-1,  1, -1);
        GL.glVertex3f(-1,  1,  1);
        GL.glVertex3f(-1, -1,  1);
        GL.glEnd();

        GL.glColor3f(0, 1, 0);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(-1, 1, -1);
        GL.glVertex3f( 1, 1, -1);
        GL.glVertex3f( 1, 1,  1);
        GL.glVertex3f(-1, 1,  1);
        GL.glEnd();

        GL.glColor3f(1, 0, 1);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(-1, -1, -1);
        GL.glVertex3f( 1, -1, -1);
        GL.glVertex3f( 1, -1,  1);
        GL.glVertex3f(-1, -1,  1);
        GL.glEnd();

        GL.glColor3f(0, 0, 1);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(-1, -1, 1);
        GL.glVertex3f( 1, -1, 1);
        GL.glVertex3f( 1,  1, 1);
        GL.glVertex3f(-1,  1, 1);
        GL.glEnd();

        GL.glColor3f(1, 1, 0);
        GL.glBegin(GL.GL_POLYGON);
        GL.glVertex3f(-1, -1, -1);
        GL.glVertex3f( 1, -1, -1);
        GL.glVertex3f( 1,  1, -1);
        GL.glVertex3f(-1,  1, -1);
        GL.glEnd();
        GL.glPopMatrix();

    GL.glPopMatrix();
}

static void main (string[] args)
{
    //Maia.Log.set_default_logger (new Maia.Log.Stderr (Maia.Log.Level.DEBUG, Maia.Log.Category.CANVAS_GEOMETRY, "test-glx"));

    var application = new Maia.Application ("test-glx", 60, { "gtk" });

    try
    {
        var document = new Maia.Manifest.Document.from_buffer (manifest, manifest.length);

        // Get window item
        var window = document["test"] as Maia.Window;
        application.add (window);
        window.visible = true;

        window.destroy_event.subscribe (() => { application.quit (); });

        var renderer_view = window.find (GLib.Quark.from_string ("renderer")) as Maia.RendererView;

        uint32[] attribs = {
                             Maia.Graphic.GLRenderer.Attribute.DOUBLEBUFFER, 0,
                             Maia.Graphic.GLRenderer.Attribute.RED_SIZE,     8,
                             Maia.Graphic.GLRenderer.Attribute.GREEN_SIZE,   8,
                             Maia.Graphic.GLRenderer.Attribute.BLUE_SIZE,    8,
                             Maia.Graphic.GLRenderer.Attribute.ALPHA_SIZE,   8
                           };

        var renderer = new Maia.Graphic.GLRenderer (Maia.Graphic.Size (1000, 800), attribs);
        renderer.initialize.add_observer (on_initialize);
        renderer.new_frame.add_observer (on_new_frame);
        renderer_view.renderer = renderer;

        var scale = window.find (GLib.Quark.from_string ("scale_bar")) as Maia.ScaleBar;
        var adjustment = new Maia.Adjustment.with_properties (0, 100, 10, 10);
        adjustment.@value = 42;
        scale.adjustment = adjustment;

        // Run application
        application.run ();
    }
    catch (GLib.Error err)
    {
        Maia.Log.error (GLib.Log.METHOD, Maia.Log.Category.MANIFEST_PARSING, "error on parsing: %s", err.message);
    }
}
